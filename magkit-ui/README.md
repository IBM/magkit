# magkit-ui Module

## Overview
The `magkit-ui` module provides UI-related utilities and extensions for Magnolia-based solutions within the IBM iX Magnolia Kit. It complements core functionality by offering rendering-time diagnostics and controlled auto-generation behavior for UI content structures.

## Package: `de.ibmix.magkit.ui.rendering`
This package contains listeners and generators enhancing Magnolia's rendering pipeline.

### Classes
| Class | Purpose |
|-------|---------|
| `OnlyOnceCopyGenerator` | Prevents repeated auto-generation of child nodes by marking a parent node with a guard property `isAutogenerated`. Ensures idempotent execution during initial content setup. |
| `RenderingMetrics` | A rendering listener measuring wall-clock time for each rendered definition (component, area, page) and logging structured DEBUG output for performance diagnostics. |

### Usage Summary
- Register `RenderingMetrics` under `config:/server/rendering/engine/listeners` and set the logger `de.ibmix.magkit.ui.rendering.RenderingMetrics` to `DEBUG` to activate timing output.
- Use `OnlyOnceCopyGenerator` when you need to auto-generate template content exactly once per parent node; subsequent invocations will be skipped after the marker property is set.

### Example (Generator)
```java
Node area = ...; // obtain writable parent node
AutoGenerationConfiguration<?> cfg = ...; // Magnolia autogen configuration
new OnlyOnceCopyGenerator(area).generate(cfg);
```

### Performance & Safety Notes
- `RenderingMetrics` adds negligible overhead when DEBUG logging is disabled.
- `OnlyOnceCopyGenerator` writes JCR property `isAutogenerated` and saves the session; ensure appropriate repository permissions.

### Thread-Safety
Instances of both classes are not thread-safe and should be used per rendering operation rather than shared across threads.

## Contributing
Follow project-wide coding, Javadoc, and Checkstyle guidelines. Keep documentation concise, in English, and avoid duplication.

## License
Apache License 2.0 (see root `LICENSE`).

