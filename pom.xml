<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <artifactId>magkit-multi</artifactId>
        <groupId>com.aperto.magkit</groupId>
        <version>1.0-SNAPSHOT</version>
        <relativePath>../pom.xml</relativePath>
    </parent>
		<groupId>com.aperto.magkit</groupId>
    <artifactId>magkit</artifactId>
    <version>1.0-SNAPSHOT</version>
    <name>Aperto Magnolia Kit</name>
    <packaging>jar</packaging>
    <url>http://www.aperto.com</url>
		
		<dependencies>
        <dependency>
            <groupId>apertoCommons</groupId>
            <artifactId>apertoCommons</artifactId>
            <version>2.7.3</version>
        </dependency>
        <dependency>
            <groupId>commons-lang</groupId>
            <artifactId>commons-lang</artifactId>
            <version>2.3</version>
        </dependency>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2</version>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>servlet-api</artifactId>
            <version>2.4</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>jsp-api</artifactId>
            <version>2.0</version>
            <scope>provided</scope>
        </dependency>
        <!-- Tobago -->
        <dependency>
            <groupId>org.apache.myfaces.tobago</groupId>
            <artifactId>tobago-tool-apt</artifactId>
            <version>1.0.11</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.myfaces.tobago</groupId>
            <artifactId>tobago-tool-annotation</artifactId>
            <version>1.0.11</version>
        </dependency>
        <!-- Magnolia dependencies -->
        <dependency>
            <groupId>info.magnolia</groupId>
            <artifactId>magnolia-empty-webapp</artifactId>
            <version>3.5.4</version>
            <type>war</type>
        </dependency>
        <dependency>
            <groupId>info.magnolia</groupId>
            <artifactId>magnolia-empty-webapp</artifactId>
            <version>3.5.4</version>
            <type>pom</type>
            <exclusions>
                <exclusion>
                    <artifactId>magnolia-module-cache</artifactId>
                    <groupId>info.magnolia</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>magnolia-module-mail</artifactId>
                    <groupId>info.magnolia</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>dom4j</groupId>
            <artifactId>dom4j</artifactId>
            <version>1.6</version>
        </dependency>
        <!-- Spring e.g. for mail -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring</artifactId>
            <version>2.0.6</version>
        </dependency>
        <!-- testing -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-mock</artifactId>
            <version>2.0.6</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.mockrunner</groupId>
            <artifactId>mockrunner</artifactId>
            <version>0.3.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.4</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.hamcrest</groupId>
            <artifactId>hamcrest-all</artifactId>
            <version>1.1</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>com.aperto.magkit</groupId>
            <artifactId>magkit-test</artifactId>
            <version>1.0-SNAPSHOT</version>
            <scope>test</scope>
        </dependency>
        </dependencies>
				<build>
        <plugins>
			<!--  see http://myfaces.apache.org/tobago/tobago-tool/maven-apt-plugin -->
            <plugin>
                <groupId>org.apache.myfaces.tobago</groupId>
                <artifactId>maven-apt-plugin</artifactId>
                <version>1.0.11</version>
                <executions>
                    <execution>
                        <id>generate-tlds</id>
                        <goals>
                            <goal>execute</goal>
                        </goals>
                        <configuration>
                            <targetFiles>
                                <targetFile>magkit-taglib.tld</targetFile>
                            </targetFiles>
                            <generated>src/main/webapp/WEB-INF/tlds</generated>
                            <resourceTargetPath>META-INF</resourceTargetPath>
                            <factory>org.apache.myfaces.tobago.apt.TaglibAnnotationProcessorFactory</factory>
                            <nocompile>true</nocompile>
                            <encoding>Windows-1252</encoding>
                            <target>1.5</target>
                            <verbose>false</verbose>
                            <includes>
                                <include>com/aperto/magkit/taglib/**/*.java</include>
                            </includes>
                            <force>true</force>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
                <!-- See http://mojo.codehaus.org/cobertura-maven-plugin -->
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>cobertura-maven-plugin</artifactId>
                    <version>2.1</version>
                    <executions>
                        <execution>
                            <phase>clean</phase>
                            <goals>
                                <goal>clean</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-idea-plugin -->
                <plugin>
                    <artifactId>maven-idea-plugin</artifactId>
                    <version>2.1</version>
                    <configuration>
                        <downloadSources>false</downloadSources>
                        <downloadJavadocs>false</downloadJavadocs>
                        <jdkLevel>1.5</jdkLevel>
                        <exclude>tomcat/target, tomcat/repositories</exclude>
                    </configuration>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-eclipse-plugin -->
                <plugin><artifactId>maven-eclipse-plugin</artifactId>
                    <version>2.4</version>
                    <configuration>
                        <downloadSources>true</downloadSources>
                        <additionalProjectnatures>
                            <projectnature>com.atlassw.tools.eclipse.checkstyle.CheckstyleNature</projectnature>
                            <projectnature>com.genuitec.eclipse.springframework.springnature</projectnature>
                        </additionalProjectnatures>
                        <additionalBuildcommands>
                            <buildcommand>com.atlassw.tools.eclipse.checkstyle.CheckstyleBuilder</buildcommand>
                            <buildcommand>com.genuitec.eclipse.springframework.springbuilder</buildcommand>
                        </additionalBuildcommands>
                        <projectnatures>
                            <java.lang.String>org.springframework.ide.eclipse.core.springnature</java.lang.String>
                            <java.lang.String>org.eclipse.jdt.core.javanature</java.lang.String>
                        </projectnatures>
                        <!-- additionalConfig>
                            <file>
                                <name>.checkstyle</name>
                                <content>
                                    <![CDATA[
                                        <fileset-config file-format-version="1.2.0" simple-config="true">
                                            <local-check-config name="aperto" location="/build-tools/src/main/resources/com/aperto/checkstyle-rules.xml" type="project" description="">
                                                <additional-data name="protect-config-file" value="true" />
                                            </local-check-config>
                                            <fileset name="all" enabled="true" check-config-name="aperto" local="true">
                                                <file-match-pattern match-pattern="." include-pattern="true" />
                                            </fileset>
                                            <filter name="NonSrcDirs" enabled="true" />
                                        </fileset-config>]]>
                                </content>
                            </file>
                        </additionalConfig -->
                    </configuration>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-release-plugin/ -->
                <plugin>
                    <artifactId>maven-release-plugin</artifactId>
                    <configuration>
                        <tagBase>https://subversion.aperto.de/magkit/tags</tagBase>
                        <preparationGoals>clean install</preparationGoals>
                        <autoVersionSubmodules>true</autoVersionSubmodules>
                    </configuration>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-compiler-plugin -->
                <plugin>
                    <artifactId>maven-compiler-plugin</artifactId>
                    <configuration>
                        <encoding>Windows-1252</encoding>
                        <source>1.5</source>
                        <target>1.5</target>
                    </configuration>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-surefire-plugin -->
                <plugin>
                    <groupId>org.apache.maven.plugins</groupId>
                    <artifactId>maven-surefire-plugin</artifactId>
                    <configuration>
                        <includes>
                            <include>**/Test*.java</include>
                            <include>**/*Test.java</include>
                            <include>**/*Tests.java</include>
                            <include>**/*TestCase.java</include>
                        </includes>
                        <systemProperties>
                            <property>
                                <name>net.sourceforge.cobertura.datafile</name>
                                <value>target/cobertura/cobertura.ser</value>
                            </property>
                        </systemProperties>
                    </configuration>
                </plugin>
                <!-- See http://maven.apache.org/plugins/maven-checkstyle-plugin -->
                <plugin>
                    <artifactId>maven-checkstyle-plugin</artifactId>
                    <version>2.1</version>
                    <configuration>
                        <sourceDirectory>src</sourceDirectory>
                        <configLocation>com/aperto/checkstyle-rules.xml</configLocation>
                        <failOnViolation>true</failOnViolation>
                        <failsOnError>true</failsOnError>
                        <enableRulesSummary>false</enableRulesSummary>
                        <consoleOutput>true</consoleOutput>
                        <includeTestSourceDirectory>true</includeTestSourceDirectory>
                        <linkXRef>false</linkXRef>
												<suppressionsLocation>${basedir}/src/main/config/checkstyle-suppressions.xml</suppressionsLocation>
												<excludes>**/package-info.java</excludes>
                    </configuration>
                    <executions>
                        <execution>
                            <phase>compile</phase>
                            <goals>
                                <goal>check</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
                <!-- See http://mojo.codehaus.org/findbugs-maven-plugin -->
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>findbugs-maven-plugin</artifactId>
                    <version>1.1.1</version>
                    <configuration>
                        <effort>Max</effort>
                        <reportLevel>high</reportLevel>
                        <excludeFilterFile>com/aperto/findbugs-suppressions.xml</excludeFilterFile>
                    </configuration>
                </plugin>
                <!-- See http://clirr.sourceforge.net/clirr-maven/index.html -->
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>clirr-maven-plugin</artifactId>
                    <version>2.1.1</version>
                    <configuration>
                        <minSeverity>info</minSeverity>
                    </configuration>
                </plugin>
								<!-- http://cargo.codehaus.org/ -->
            <plugin>
                <groupId>org.codehaus.cargo</groupId>
                <artifactId>cargo-maven2-plugin</artifactId>
                <version>${cargoVersion}</version>
                <configuration>
                    <!-- Container configuration -->
                    <container>
                        <containerId>tomcat5x</containerId>
                        <type>installed</type>
                        <zipUrlInstaller>
                            <url>http://www.apache.org/dist/tomcat/tomcat-5/v5.5.25/bin/apache-tomcat-5.5.25.zip</url>
                            <installDir>${java.io.tmpdir}/magkit-tomcat</installDir>
                        </zipUrlInstaller>
												<dependencies>
													<dependency>
									            <groupId>org.springframework</groupId>
									            <artifactId>spring</artifactId>
									        </dependency>
													<dependency>
									            <groupId>apertoCommons</groupId>
									            <artifactId>apertoCommons</artifactId>
									        </dependency>
									        <dependency>
									            <groupId>commons-lang</groupId>
									            <artifactId>commons-lang</artifactId>
									        </dependency>
									        <dependency>
									            <groupId>commons-collections</groupId>
									            <artifactId>commons-collections</artifactId>
									        </dependency>
									      </dependencies>
                    </container>

                    <!-- Configuration to use with the container -->
                    <configuration>
                        <type>existing</type>
                        <home>${basedir}/tomcat</home>
                        <properties>
                            <cargo.servlet.port>9090</cargo.servlet.port>
                            <!-- <cargo.jvmargs>-Dmagnolia.config.home=${basedir}/magnolia-config -Xms128M -Xmx800M -XX:MaxPermSize=128M -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005</cargo.jvmargs> -->
                            <cargo.jvmargs>-Xms128M -Xmx800M -XX:MaxPermSize=128M -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=5005</cargo.jvmargs>
                        </properties>
                    </configuration>
                </configuration>
            </plugin>
        </plugins>
        <extensions>
            <extension>
                <groupId>com.aperto</groupId>
                <artifactId>build-tools</artifactId>
                <version>0.1</version>
            </extension>
        </extensions>
    </build>
		<profiles>
        <profile>
            <id>author</id>
            <build>
                <plugins>
                    <!-- see http://maven.apache.org/plugins/maven-clean-plugin -->
                    <plugin>
                        <artifactId>maven-clean-plugin</artifactId>
                        <configuration>
                            <filesets>
                                <fileset>
                                    <directory>${basedir}/repositories</directory>
                                    <includes>
                                        <include>author</include>
                                    </includes>
                                </fileset>
                            </filesets>
                        </configuration>
                    </plugin>
                    <!-- http://cargo.codehaus.org/ -->
                    <plugin>
                        <groupId>org.codehaus.cargo</groupId>
                        <artifactId>cargo-maven2-plugin</artifactId>
                        <version>${cargoVersion}</version>
                        <configuration>
                            <!-- Configuration with deploy -->
                            <configuration>
                                <type>standalone</type>
                                <deployables>
                                    <deployable>
																				<groupId>info.magnolia</groupId>
																				<artifactId>magnolia-empty-webapp</artifactId>
																				<type>war</type>
                                        <properties>
                                            <context>author</context>
                                        </properties>
                                    </deployable>
                                </deployables>
                            </configuration>
                        </configuration>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
		
    <reporting>
        <plugins>
            <!-- See http://mojo.codehaus.org/findbugs-maven-plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>findbugs-maven-plugin</artifactId>
                <version>1.1.1</version>
                <configuration>
                    <effort>Max</effort>
                    <reportLevel>high</reportLevel>
                    <excludeFilterFile>com/aperto/findbugs-suppressions.xml</excludeFilterFile>
                </configuration>
            </plugin>
            <!-- See http://maven.apache.org/plugins/maven-javadoc-plugin -->
            <plugin>
                <artifactId>maven-javadoc-plugin</artifactId>
            </plugin>
            <!-- See http://maven.apache.org/plugins/maven-jxr-plugin -->
            <plugin>
                <artifactId>maven-jxr-plugin</artifactId>
            </plugin>
            <!-- See http://maven.apache.org/plugins/maven-surefire-report-plugin -->
            <plugin>
                <artifactId>maven-surefire-report-plugin</artifactId>
            </plugin>
            <!-- See http://mojo.codehaus.org/cobertura-maven-plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>cobertura-maven-plugin</artifactId>
                <version>2.1</version>
                <configuration>
                    <instrumentation>
                        <excludes>
                            <exclude>jsp/**</exclude>
                        </excludes>
                    </instrumentation>
                </configuration>
            </plugin>
            <!-- See http://mojo.codehaus.org/taglist-maven-plugin -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>taglist-maven-plugin</artifactId>
                <configuration>
                    <tags>
                        <tag>TODO</tag>
                        <tag>CHECKSTYLE</tag>
                    </tags>
                </configuration>
            </plugin>
            <!-- See http://maven.apache.org/plugins/maven-pmd-plugin -->
            <plugin>
                <artifactId>maven-pmd-plugin</artifactId>
                <configuration>
                    <linkXref>true</linkXref>
                    <sourceEncoding>Windows-1252</sourceEncoding>
                    <targetJdk>1.5</targetJdk>
                    <includeTests>true</includeTests>
                    <!-- See http://pmd.sourceforge.net/rules/index.html -->
                    <rulesets>
                        <ruleset>rulesets/finalizers.xml</ruleset>
                        <ruleset>rulesets/basic-jsp.xml</ruleset>
                        <ruleset>rulesets/unusedcode.xml</ruleset>
                        <ruleset>rulesets/coupling.xml</ruleset>
                        <ruleset>rulesets/basic.xml</ruleset>
                        <ruleset>rulesets/design.xml</ruleset>
                        <ruleset>rulesets/sunsecure.xml</ruleset>
                        <ruleset>rulesets/strictexception.xml</ruleset>
                        <ruleset>rulesets/javabeans.xml</ruleset>
                        <ruleset>rulesets/typeresolution.xml</ruleset>
                        <ruleset>rulesets/codesize.xml</ruleset>
                        <ruleset>rulesets/imports.xml</ruleset>
                        <ruleset>rulesets/clone.xml</ruleset>
                        <ruleset>rulesets/braces.xml</ruleset>
                        <ruleset>rulesets/strings.xml</ruleset>
                        <!-- ruleset>${multiproject.dir}/src/main/config/pmd-rules.xml</ruleset -->
                    </rulesets>
                </configuration>
            </plugin>
            <!-- See http://clirr.sourceforge.net/clirr-maven/index.html -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>clirr-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </reporting>
</project>